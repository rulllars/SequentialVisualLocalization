# 1D coarse localization filter
The filter divides the reference route up into equal sized bins. Each bin is associated with a probability measure that starts out equal for all bins. Each image which is to be localized is then compared with each of the images from the reference route by their respective DVLAD descriptor. The likeness between image descriptors is then taken as a likelihood update for the filter, by means of resampling the unevenly distributed reference image positions onto the evenly distributed bins. A motion step is then applied by moving the probability mass along the route according to the driven distance and convolving it with a kernel representing the motion uncertainty. After reaching the end of the route, a backwards pass is applied to arrive at the final smoothed probability mass functions (PMF) for each timestep. The PMF:s are saved to disk, one file per each image that is localized.

In order to find the best matching images, the maximum a-posteriori (MAP) estimate is found for each PMF (where along the route the PMF is highest). The N nearest reference images to the MAP estimate can then be selected for further processing in the matching process for the fine grained filter. <!-- The top matches from this process have been saved in a zip-file in the data directory.-->
